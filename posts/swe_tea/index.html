<!DOCTYPE html>
<html><head>
<title>swe tea</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://rsms.me" crossorigin>


<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono&display=swap">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css">



<link rel="stylesheet" href="/css/main.min.7a8dc5b063775e5d3df0beea151395736f55ccb3343f70eea0595b53da5015c4.css">


<script defer src="/en.search.min.c61d7710b45309b00c08dc75b18e3c1756d826642937afd09eeb3b9ae90e4183.js" integrity="sha256-xh13ELRTCbAMCNx1sY48F1bYJmQpN6/Qnus7mukOQYM="></script>


<link rel="stylesheet" href="/katex/katex.min.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="/katex/katex.min.css"></noscript>
<script defer src="/katex/katex.min.js"></script>
<script defer src="/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
</head>
<body><header>
    <div class="header-main">
        <a href="/" id="logo">
            <img src="/svg/icon.svg" alt="icon" id="raccoon" />
        </a>
        <h3 class="site-title">عجفت الغور</h3>
        <div id="search">
            
<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>

        </div>
    </div>
    <nav id="breadcrumb" aria-label="Note trail"><span class="trail-label">trail</span><span class="trail-crumbs"></span></nav>
</header>

<div class="layout-container">
  <div class="grid-container">
    <div class="grid">
      <div class="page" data-level="1">
        <div class="content">
            <h1>swe tea</h1>
            


            <p><a href="/posts/computers/">computers</a></p>
<ul>
<li>Weekly paper club/book club/video club</li>
<li>Need to figure out timings (tuesday nights?)</li>
<li>model off of ebpf reading groups and the distirbuted systems reading groups
<ul>
<li><a href="https://hackmd.io/@ebpf-reading-group/rkg0ou0I2">https://hackmd.io/@ebpf-reading-group/rkg0ou0I2</a></li>
</ul>
</li>
</ul>
<h2 id="profiling-a-warehouse-scale-computer">Profiling a Warehouse Scale Computer</h2>
<ul>
<li>
<p>Kanev, Svilen, Juan Pablo Darago, Kim Hazelwood, Parthasarathy Ranganathan, Tipp Moseley, Gu-Yeon Wei, and David Brooks. “Profiling a Warehouse-Scale Computer.” In Proceedings of the 42nd Annual International Symposium on Computer Architecture, 158–69. Portland Oregon: ACM, 2015. <a href="https://doi.org/10.1145/2749469.2750392">https://doi.org/10.1145/2749469.2750392</a>.</p>
</li>
<li>
<p>They only used C++, since it made it simpler</p>
</li>
<li>
<p>only on Ivy Bridge machines</p>
</li>
<li>
<p>No &ldquo;killer application to optimize for, large chunks of compute are data locality bound and CPU stall bound, suggests that 2 wide SMT is not sufficient to eliminate the bulk of the overheads</p>
<ul>
<li>What <strong>is</strong> a 2 wide SMT anyways?</li>
<li>I&rsquo;m assuming it means 2 instructions at once, but not all instructions are parallelizable</li>
<li>workload diversity is very real, we&rsquo;ve gotten a range of compute that&rsquo;s wide enough for this not to matter
<ul>
<li>At the start, 50 hottest binaries account for 80% of execution</li>
<li>Three years later, top 50 are only 60%</li>
<li>Coverage decreases more than 5% per over the course of 3 years</li>
<li>Also does not include public clouds</li>
</ul>
</li>
<li>Applications, as they grow more diverse and fatter, have gotten more flat profiles themselves
<ul>
<li>What would this look like for chatd?</li>
</ul>
</li>
</ul>
</li>
<li>
<p>&ldquo;Data center tax&rdquo; is very real, large chunks of your machine are going to be devoted to doing logging, rpc, ser/des</p>
</li>
<li>
<p>Yacine: top down measurement? never heard of this before</p>
<ul>
<li>Yasin, Ahmad. “A Top-Down Method for Performance Analysis and Counters Architecture.” In 2014 IEEE International Symposium on Performance Analysis of Systems and Software (ISPASS), 35–44, 2014. <a href="https://doi.org/10.1109/ISPASS.2014.6844459">https://doi.org/10.1109/ISPASS.2014.6844459</a>.</li>
<li>Talks about core front-end and core back-end, what is that?
<ul>
<li>Front end:
<ul>
<li>instruction fetch</li>
<li>decode unit</li>
<li>branch prediction</li>
<li>uop cache</li>
<li>loop stream detector (?) - optimizes tight loops</li>
</ul>
</li>
<li>Back end:
<ul>
<li>sched/reservation station</li>
<li>execution units</li>
<li>reorder buffer</li>
<li>register file</li>
<li>load/store units</li>
</ul>
</li>
</ul>
</li>
<li>Top down classifies pipeline slots into retiring (useful work), frontend bounc, backend bound, and bad speculation</li>
<li>They believe that cache problems (lots of lukewarm code) is why the frontend is the primary staller
<ul>
<li>i.e. binaries with 100s of mb</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>memcpy</code> and <code>memove()</code> is 4-5% of datacenter cycles</p>
<ul>
<li>as is encryption</li>
</ul>
</li>
<li>
<p>25% of datacenter tax is compressing and decompressing data</p>
</li>
</ul>
<figure><img src="/ox-hugo/2025-01-05_09-18-46_screenshot.png"/>
</figure>

<h2 id="dhalion">Dhalion</h2>
<ul>
<li>This paper was actually quite dull</li>
<li>Interesting bit is the split: metrics -&gt; symptoms -&gt; many to many -&gt; diagnoses -&gt; many to many -&gt; resolvers
<ul>
<li>This whole thing is called a &ldquo;policy&rdquo;</li>
</ul>
</li>
<li>Control loop system, explodes in complexity
<ul>
<li>Part of the control loop is blacklisting certain actions from occuring that previously didn&rsquo;t move you towards your desired solution</li>
<li></li>
</ul>
</li>
</ul>
<h2 id="pgo-block-1-2026">PGO - Block 1 2026</h2>
<h3 id="li-david-xinliang-raksit-ashok-and-robert-hundt-dot-lightweight-feedback-directed-cross-module-optimization-dot-proceedings-of-the-8th-annual-ieee-acm-international-symposium-on-code-generation-and-optimization-acm-april-24-2010-53-61-dot-https-doi-dot-org-10-dot-1145-1772954-dot-1772964-dot">Li, David Xinliang, Raksit Ashok, and Robert Hundt. “Lightweight Feedback-Directed Cross-Module Optimization.” Proceedings of the 8th Annual IEEE/ACM International Symposium on Code Generation and Optimization, ACM, April 24, 2010, 53–61. <a href="https://doi.org/10.1145/1772954.1772964">https://doi.org/10.1145/1772954.1772964</a>.</h3>
<ul>
<li>Two most important IPO passes are function inlining and indirect function call promotion</li>
<li>Basically:
<ol>
<li>We want to have a smarter way of combining things without making fat .o files</li>
<li>We can use FDO analysis to determine which functions are hot and worth inlining or promoting</li>
<li>In order to do so, we can use a greedy algorithm to generate families, which help link these together</li>
</ol>
</li>
<li>We push linking earlier by using the profiled data</li>
<li>Profile data is augmented FDO data, so
<ul>
<li>After training run is done, the in-memory info contains a callgraph, using a greedy clustering algorithm to decide on &ldquo;friends&rdquo;</li>
<li>afterwards, we have a standard FDO data (raw counts of how many times each branch was taken), and also module grouping decisions</li>
</ul>
</li>
<li>In order to make this workable for <a href="/posts/build_systems/#buck-blaze-bazel">Buck / Blaze / Bazel</a>, an auxillery file needs to get shipped so the build system knows which sources to include, even when they&rsquo;re not strictly dependant, as a form of dynamic dependency injection</li>
<li>Predacessor to <a href="/posts/linkers/#lto--and-thinlto">LTO (and ThinLTO)</a></li>
</ul>
<h3 id="discussion">Discussion</h3>
<ul>
<li>Coming from FDO baseline is a bit specious</li>
<li>What is a translation unit here?</li>
</ul>
<h3 id="panchenko-maksim-rafael-auler-bill-nell-and-guilherme-ottoni-dot-bolt-a-practical-binary-optimizer-for-data-centers-and-beyond-dot-arxiv-1807-dot-06735-dot-preprint-arxiv-october-12-2018-dot-https-doi-dot-org-10-dot-48550-arxiv-dot-1807-dot-06735-dot">Panchenko, Maksim, Rafael Auler, Bill Nell, and Guilherme Ottoni. “BOLT: A Practical Binary Optimizer for Data Centers and Beyond.” arXiv:1807.06735. Preprint, arXiv, October 12, 2018. <a href="https://doi.org/10.48550/arXiv.1807.06735">https://doi.org/10.48550/arXiv.1807.06735</a>.</h3>
<ul>
<li>How does this interact with ASLR?</li>
</ul>

            




   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   



  <div class="bl-section">
    <h4>Links to this note</h4>
    <div class="backlinks">
        <ul>
       
          <li><a href="/posts/linkers/">linkers</a></li>
       
     </ul>
    </div>
  </div>


        </div>
      </div>
    </div>
  </div>
  

<nav id="toc" class="toc-sidebar">
  <div class="toc-content">
    <h2>Table of Contents</h2>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#profiling-a-warehouse-scale-computer">Profiling a Warehouse Scale Computer</a></li>
    <li><a href="#dhalion">Dhalion</a></li>
    <li><a href="#pgo-block-1-2026">PGO - Block 1 2026</a>
      <ul>
        <li><a href="#li-david-xinliang-raksit-ashok-and-robert-hundt-dot-lightweight-feedback-directed-cross-module-optimization-dot-proceedings-of-the-8th-annual-ieee-acm-international-symposium-on-code-generation-and-optimization-acm-april-24-2010-53-61-dot-https-doi-dot-org-10-dot-1145-1772954-dot-1772964-dot">Li, David Xinliang, Raksit Ashok, and Robert Hundt. “Lightweight Feedback-Directed Cross-Module Optimization.” Proceedings of the 8th Annual IEEE/ACM International Symposium on Code Generation and Optimization, ACM, April 24, 2010, 53–61. <a href="https://doi.org/10.1145/1772954.1772964">https://doi.org/10.1145/1772954.1772964</a>.</a></li>
        <li><a href="#discussion">Discussion</a></li>
        <li><a href="#panchenko-maksim-rafael-auler-bill-nell-and-guilherme-ottoni-dot-bolt-a-practical-binary-optimizer-for-data-centers-and-beyond-dot-arxiv-1807-dot-06735-dot-preprint-arxiv-october-12-2018-dot-https-doi-dot-org-10-dot-48550-arxiv-dot-1807-dot-06735-dot">Panchenko, Maksim, Rafael Auler, Bill Nell, and Guilherme Ottoni. “BOLT: A Practical Binary Optimizer for Data Centers and Beyond.” arXiv:1807.06735. Preprint, arXiv, October 12, 2018. <a href="https://doi.org/10.48550/arXiv.1807.06735">https://doi.org/10.48550/arXiv.1807.06735</a>.</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</nav>


</div>

<script src="/js/URI.js" type="text/javascript"></script>

<script src="/js/page.js" type="text/javascript"></script>
</body>
</html>
