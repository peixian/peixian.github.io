<!DOCTYPE html>
<html><title>linux</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />


<link rel="stylesheet" href="/css/main.min.532078bb650bec3433e8e9db19e0453faa66c9cc0ce761054558a91d87039e9d.css"/>
<script defer src="/en.search.min.8f05a91f8620f3a07254c7a0f43d203938d5166cb27f4cac5f31d6acd61f7168.js" integrity="sha256-jwWpH4Yg86ByVMeg9D0gOTjVFmyyf0ysXzHWrNYfcWg="></script>

<link rel="stylesheet" href="/katex/katex.min.css" />
<script defer src="/katex/katex.min.js"></script>
<script defer src="/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<body><header>
    <a href="/" id="logo">
        <img src="/svg/icon.svg" alt="icon" id="raccoon" />

    </a>
    <h3 class="site-title">عجفت الغور</h3>
    <div id="search">
        
<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>

    </div>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
          <h1>linux</h1>

          <p>Tags: <a href="/posts/computers/">computers</a></p>
<ul>
<li>Currently Linux plumber and hobbiest occupy two different workds
<ul>
<li>Desktop linux and DevOps middleware are paid employees, vs poeple who use suckless softawre, musl-based distros</li>
</ul>
</li>
</ul>
<h2 id="greybeard-qualification">Greybeard Qualification</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=5osOHhBWKOQ&amp;list=PLSIUOFhnxEiC3YTdxwqZqgEY5imVL8U8J&amp;index=1">https://www.youtube.com/watch?v=5osOHhBWKOQ&amp;list=PLSIUOFhnxEiC3YTdxwqZqgEY5imVL8U8J&amp;index=1</a></li>
</ul>
<h3 id="process">Process</h3>
<h4 id="internal-datastructure-struct-task-struct">Internal datastructure <code>struct task_struct {}</code>:</h4>
<ul>
<li>pid -&gt; integer, will wrap around unused pids</li>
<li>parent -&gt; every proces has a parent, each one has a children</li>
<li>tty -&gt; in the old days, every process had an associated terminal called a tty</li>
<li>uid -&gt; user the process is running as</li>
<li>gid -&gt; group id</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>A process can change its ids (<code>setuid</code>)</li>
<li>From a sysadmin pov, what can you do to a process?
<ul>
<li>create/send signals/ps or proc/strace</li>
<li>each process has an address space, every process thinks it owns the entire theoretical memory of the computer</li>
</ul>
</li>
</ul>
<h4 id="memory">memory</h4>
<ul>
<li>
<p>initialized and uninitalized data</p>
</li>
<li>
<p>break system call is used to increase heap size</p>
</li>
<li>
<p>heap sits on top and grows up and the stack grows down</p>
<figure><img src="/ox-hugo/2024-03-10_15-59-03_screenshot.png"/>
    </figure>

</li>
<li>
<p>in between space is used for shared libraries</p>
</li>
<li>
<p>32 bit 4GB</p>
</li>
<li>
<p>environment variables and cmdline is at the very top</p>
</li>
<li>
<p>kernel puts all of its dataat the top of the data structure</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p><code>pmap</code></p>
<ul>
<li>permissions on the memory regions like file</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>limits
<ul>
<li>used to be important during timeshare systems</li>
<li>rlimit or ulimit for stack size
<ul>
<li>common one is the number of open files</li>
</ul>
</li>
</ul>
</li>
<li>process priority
<ul>
<li><code>nice</code> in shell</li>
<li>static priority</li>
<li>dynamic priority</li>
<li>real-time priority</li>
<li>all related to scheduling</li>
<li><code>nice</code> or <code>getpriority()</code> or <code>setpriority()</code> system calls</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ipc">IPC</h4>
<!-- raw HTML omitted -->
<ul>
<li>
<p>pipes</p>
<ul>
<li>internal buffer data structure</li>
<li>two file descriptors, connected to each end of the pipe</li>
<li>similar to a channel in go</li>
<li>no temp file at all, <strong>all</strong> in memory</li>
<li>one limitation: only exist between members of the same family within the same process three
<ul>
<li>ls | wc works because both ls and wc are children of the chell</li>
</ul>
</li>
<li>FIFOs/named pipes, exist in the filesystem, acts like a regular pipe
<ul>
<li>used for multiple processes</li>
</ul>
</li>
<li>cron uses a fifo in the kernel?</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>signals</p>
<ul>
<li>Killing a process can be done with <code>kill -s &lt;SIGNAL&gt; pid</code>, send <code>SIGQUIT</code> to request a craceful quit or <code>SIGABRT</code> to request immediate termination
<ul>
<li>32 original flavors</li>
<li>32 new flavors</li>
<li>list with <code>kill -l</code></li>
<li>process can send signals to another process, or kernel sends it to your process</li>
<li>common
<ul>
<li>9 - kill</li>
<li>15 - term</li>
<li>1 - HUP - hangup (for when you have a connection), now it&rsquo;s used to reload config files</li>
<li>2 - INT - interrupt</li>
<li>19 - STOP - suspend in background
<ul>
<li><code>fg</code> command to see</li>
</ul>
</li>
<li>18 - CONT</li>
<li>14 - ALARM - timer in kernel, when the process is sent an alarm signal</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>System V stuff</p>
<ul>
<li>
<p>semget - semaphore</p>
<ul>
<li>SystemV semaphores can be manipulated as sets, and provides more control than POSIX ones</li>
</ul>
</li>
<li>
<p>msget - message service get</p>
</li>
<li>
<p>shmget - shared memory</p>
<ul>
<li>most efficient is one setting data and another is reading</li>
</ul>
</li>
<li>
<p>RPC - literally a remote procedure call, sent over to a different process usually on another process</p>
</li>
<li>
<p>mmap - a way to map a file into memory, then shared with another process, BSD trick</p>
<ul>
<li>you map a chunk of memory out to a file, and then its propagated, then you can have a set of memory that&rsquo;s not tied to a particular file, then another process can share this file
<ul>
<li>anon memory, not tied to a particular process, going to be paged out to swap space</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="execution-scheduling-processes-and-threads">Execution, Scheduling, Processes, and Threads</h3>
<ul>
<li><a href="https://www.youtube.com/watch?v=hgb-1f6BlGI&amp;list=PLSIUOFhnxEiC3YTdxwqZqgEY5imVL8U8J&amp;index=3">https://www.youtube.com/watch?v=hgb-1f6BlGI&amp;list=PLSIUOFhnxEiC3YTdxwqZqgEY5imVL8U8J&amp;index=3</a></li>
<li><code>fork()</code>
<ul>
<li>fork creates a new process that&rsquo;s an exact copy of the original</li>
<li>copies memory, open files, basically everything</li>
<li>not inherited: file locks and pending signals</li>
<li>how does it work? why duplicate?</li>
<li>fork as the parent returns &gt;0, the pid returns child pid</li>
<li>0 is child</li>
<li>&lt;1 is error</li>
</ul>
</li>
</ul>
<h4 id="file-descriptor">file descriptor</h4>
<ul>
<li>integer that represents a kernel data structure that has an inode, read position, etc</li>
<li>pipes</li>
<li>it&rsquo;s possible to redirect the inputs and outputs of the program (another great idea of linux)</li>
<li>now the child can something do different, including exec() a new program
<ul>
<li><code>execve()</code> runs a new program, usually fork and exec is the pattern (although fork is bad now)
<ul>
<li>apache web server for example forks</li>
</ul>
</li>
<li>bash execs two programs and</li>
<li>copy on write fork()
<ul>
<li>since you&rsquo;re just gonna exec, why bother copying the whole thing?</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="daemons"><code>daemons</code>?</h4>
<ul>
<li>fork a child process, then the parent exits and leaves the child with parent as the init</li>
<li>How do become a daemon?
<ul>
<li>close all open files</li>
<li>become the process group leader
<ul>
<li>process group, by default, a processes of the login shells is in the group</li>
<li>signals get passed to everyone in the process group, such as shells hanging up</li>
</ul>
</li>
<li>set the umask
<ul>
<li>what are the permissions I want to be sure that are turned <strong>off</strong> by default?</li>
</ul>
</li>
<li>change the dir to a safe space
<ul>
<li>change your working directory to somewhere safe, the daemon should be in a place that&rsquo;s somewhere safe</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="scheduling">scheduling</h4>
<ul>
<li>
<p>linux is multi-processing, but they have to share one CPU</p>
<ul>
<li>At any time, each of the CPU&rsquo;s in a system can be
<ol>
<li>Not associated with any process, serving and hardware interrupt (Hard IRQs)
<ul>
<li>Timer ticks, network cards, keyboards</li>
<li>Handlers here have to be fast, most of the time it is an ack</li>
</ul>
</li>
<li>Not associated with any process, serving a softirq or tasklet (Software interrupt context)
<ul>
<li>Much of the real interrupt handling work is done here</li>
<li>Tasklets are dynamically registrable versions of software soft interrupt contexts, which means you can have as many as you want, and any tasklet will only run on one CPU at any time</li>
</ul>
</li>
<li>Running in kernel space, associated with a process (user context)</li>
<li>Running a process in user space</li>
</ol>
</li>
<li>Bottom two can preempt each other, but above is a strict hierarchy, kernel process cannot preempt a softirq, a soft irq cannot preempt a hardware interrupt
<ul>
<li><a href="https://www.kernel.org/doc/html/v5.0/kernel-hacking/hacking.html#the-players">https://www.kernel.org/doc/html/v5.0/kernel-hacking/hacking.html#the-players</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>scheduling is how the kernel manages these running processes and &ldquo;take turns&rdquo;</p>
<ul>
<li>&ldquo;context switching&rdquo;, take all the registers values out, load the register values
<ul>
<li>instruction pointer</li>
<li>where is the stack? this kind of stuff</li>
<li>who gets to run next?
<ul>
<li>who&rsquo;s ready to run?</li>
<li>every process has a task state associated with it</li>
<li>when simply running, CPU-bound, the kernel will preempt a process</li>
<li>everything is in a run queue</li>
<li>process is in the task_running state, has a certain time quantum to run, by default 100ms
<ul>
<li>kernel checks the process time quantum at every tick, causes the kernel to check on the state, if the process hasn&rsquo;t exited or slept, guarentees that a process doesn&rsquo;t run forever</li>
<li>realistically it&rsquo;s 1 ms now</li>
</ul>
</li>
<li>preemptive multitasking
<ul>
<li>
<p>all TASK_RUNNING processes are part of the runqueue</p>
<ul>
<li>length of the runqueue is called the &ldquo;load average&rdquo;</li>
<li>uptime shows load averaged command
<ul>
<li>
<p>last minute, 5 minutes, 15 minutes averages</p>
<blockquote>
<p>00:43:10 up 122 days, 35 min,  3 users,  load average: 0.10, 0.10, 0.09</p>
</blockquote>
</li>
</ul>
</li>
<li>vmstat also does this with <code>r</code>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>procs -----------memory-------- -- ---swap-- -----io---- -system-- ------cpu-----
</span></span><span style="display:flex;"><span> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
</span></span><span style="display:flex;"><span> 0  0      0 65022788 1420664 60968808    0    0     0     9    0    0  3  0 97  0  0
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>high load average means you&rsquo;re trying to do too much on the system probably</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>states
<ul>
<li>TASK_RUNNING</li>
<li>TASK_INTERRUPTABLE</li>
<li>TASK_UNINTERRUPTABLE</li>
<li>TASK_STOPPED (control z)</li>
<li>TASK_TRACED (strace)</li>
<li>EXIT_ZOMBIE (the process has ended, but remains in the tree)
<ul>
<li>zombies are only leftover datastructures in the kernel</li>
<li>only reason to keep it around is so that the parent can retrieve its return value</li>
<li>is not running CPU or mem</li>
<li>usually a sign that the someone hasn&rsquo;t cleaned up</li>
<li>orphaned zombies become children of init, but the init will clean it up</li>
</ul>
</li>
<li>EXIT_DEAD
<ul>
<li>process has excited, but pages still need to be cleaned up</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="memory-management">Memory Management</h3>
<h4 id="virtual-memory">Virtual Memory</h4>
<ul>
<li>We&rsquo;re not compressing images anymore</li>
<li>But still multiprocessing, so we need to maintain individual process space</li>
<li>Memory mapping is a little different for the 64 bit versions</li>
<li>Memory mapping gets changed all the times</li>
</ul>
<h4 id="paging">Paging</h4>
<ul>
<li>
<p>Page sizes traditionally 4kb, but really if you&rsquo;re a big boy we&rsquo;re all huge pages now</p>
</li>
<li>
<p>There&rsquo;s a page table, and we represent the address space of the program and how it&rsquo;s mapped into the actual ram</p>
</li>
<li>
<p>page table entries change logical memory spaces into physical spaces, how they ordered, how they used, varies widely</p>
</li>
<li>
<p>you don&rsquo;t have to map all the pages, but if they&rsquo;re not in ram, where are they?</p>
</li>
<li>
<p>kernel allocates the pages, and mapped when a program is loaded at execute time</p>
</li>
<li>
<p>shared libraries (shared among various processes, chances are .so pages are already in RAM, so they map to another process address space)</p>
<ul>
<li>although now static binaries might be good enough since we have tons of ram now</li>
</ul>
</li>
<li>
<p>context switching doesn&rsquo;t involve memory changes</p>
<ul>
<li>means switching to different address spaces and different page tables</li>
<li>address spaces can sit all in memory with enough ram, just change the register values, no freeing memory</li>
<li>pages are copied out to swap (AND HIT DISK)</li>
<li>reason why it&rsquo;s called &ldquo;swap&rdquo;, to swap processes between context switches</li>
<li>now you just move the pages out as you need to</li>
</ul>
</li>
<li>
<p>typically a disk partition or a file, and we can have multiple swap spaces</p>
<ul>
<li><code>mkswap(8)</code> and <code>swapon(8)</code></li>
<li><code>swapon -s</code> in terms of unix blocks
<ul>
<li>unix blocks are 512 bytes, each block is half a K, although now there&rsquo;s different</li>
</ul>
</li>
</ul>
<figure><img src="/ox-hugo/2024-02-18_18-46-21_screenshot.png"/>
    </figure>

</li>
<li>
<p>Possible to have memory on the swap space <strong>and</strong> in memory!</p>
</li>
<li>
<p>&ldquo;dirty page&rdquo; - means that one copy that has been created is not the same as a the one in swap anymore</p>
<ul>
<li>dirty pages need to reswap out</li>
</ul>
</li>
<li>
<p>A &ldquo;page fault&rdquo; happens when you hit something that is not in RAM, which triggers a copy back from swap</p>
</li>
<li>
<p>happens on demand, which means paging in and out requires a <strong>very</strong> long wait</p>
</li>
<li>
<p>page ins are synchronous! the worst case</p>
</li>
</ul>
<h4 id="file-mapping-and-demand-paging">File Mapping and Demand Paging</h4>
<ul>
<li>old way: exec the process, create the VM space, copy the text, init data, then swap and copies as needed</li>
<li>now /bin file is also copied into swap</li>
<li>why not let the program on disk be its own swap space!</li>
<li>file mapping - original copy of the program is a disk copy of what&rsquo;s in memory, and then we reload them back from the file
<ul>
<li>file mapping is swap</li>
</ul>
</li>
<li>then we can just map the file into memory, you don&rsquo;t even need it in memory!
<ul>
<li>
<p>big win: only bring in pages as needed</p>
</li>
<li>
<p>mapping is instant, no waiting for the program to load</p>
</li>
<li>
<p>overall a win, demand-paging is good for most usecases (<code>ls</code> for example, you don&rsquo;t load all the code for all the options)</p>
<figure><img src="/ox-hugo/2024-02-18_18-53-53_screenshot.png"/>
        </figure>

</li>
<li>
<p>same thing happens for shared libraries -&gt; libc is used</p>
</li>
<li>
<p>anon pages -&gt; not represented by real world files, aka swap space is only needed for dynamically allocated files</p>
</li>
<li>
<p>shared libraries <code>ld.so</code></p>
</li>
<li>
<p>copy on write</p>
<ul>
<li>when you fork a process, copy on write is a flag set on each page</li>
</ul>
</li>
<li>
<p>demand paging, waiting for page faults</p>
<ul>
<li>normally: yes, but the alternative is on startup loading</li>
<li>turn it off my setting <code>mlock</code> or <code>mlockall</code>, which assures stuff isn&rsquo;t paged out</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="monitoring-vm">Monitoring VM</h4>
<ul>
<li><code>vmstat</code> - first line is always an average (<code>si</code> <code>so</code> = page ins and page outs)
<ul>
<li>block IO is usually paging</li>
</ul>
</li>
<li><code>swpd</code> - memory in swap space</li>
<li><code>free</code> - RAM that&rsquo;s free</li>
</ul>
<h4 id="file-i-o">File I/O</h4>
<ul>
<li>Solaris also does this
<ul>
<li>solaris has a page scanner that frees up scanner and each version also show scan rate</li>
<li>if the page scanner was actually running and desperately scanning then we know what&rsquo;s the memory problem</li>
</ul>
</li>
<li>All file I/O in linux is done via paging</li>
<li>Paging isn&rsquo;t necessarily bad</li>
<li><code>/proc/pid/maps</code></li>
<li><code>/proc/meminfo</code></li>
<li><code>/proc/pid/smaps</code>
<ul>
<li>Shows you the size of the memory segment</li>
<li>RSS -&gt; how much of this segment is physically present in memory</li>
<li>how much of it is shared</li>
<li>how much of it isn&rsquo;t shared</li>
<li>how much of it is dirty</li>
</ul>
</li>
</ul>
<h4 id="ram-and-swap">RAM and Swap</h4>
<ul>
<li>How do you manage memory and free it up?</li>
<li>When you&rsquo;re running low on memory
<ul>
<li>old times you do a clockhand algo, where you mark pages with one clockhand another was one that would free</li>
<li>now there&rsquo;s fancier algorithms, but we still want to get the least recently used ones</li>
</ul>
</li>
<li><code>kswapd</code> -&gt; kernel thread that frees pages</li>
<li>now when things are dangerously low, now the OOMKiller comes in
<ul>
<li>Uses an algorithm that tries to pick processes that can be killed</li>
</ul>
</li>
<li>if you&rsquo;re too low on RAM and keep paging in and out, we&rsquo;re &ldquo;thrashing&rdquo;
<ul>
<li>happens on windows more</li>
</ul>
</li>
<li>in the old days
<ul>
<li>swap &gt;= ram</li>
</ul>
</li>
<li>since now you only need it for anon memory</li>
<li>generally VM = RAM + swap</li>
<li>You want activity in RAM, with enough ram, you should have zero swap</li>
<li>Kernel still keeps page tables in memory if you have extra space
<ul>
<li>I think this is the &ldquo;cache&rdquo;</li>
<li>Everything that gets paged into memory and kept without looking at disk io</li>
</ul>
</li>
</ul>
<h3 id="startup-and-init">Startup and Init</h3>
<h4 id="boot">Boot</h4>
<ul>
<li>x86 -&gt; 80x86 architecture</li>
<li>raise the value of the RESET pin (on the processor)
<ul>
<li>this goes through and intializes two important registers</li>
<li>CS and EIP register
<ul>
<li>CS - address of the stack and some other flags</li>
<li>EIP - instruction pointer</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="bios">BIOS</h4>
<ul>
<li>This is coreboot/oreboot/libreboot</li>
<li>Interrupt driven process that provides access to the hardware (DOS descended)</li>
<li>Not a major part of the linux operating system, only used to get the kernel loaded</li>
<li>Linux has its own device drivers and interrupt handlers</li>
<li>POST (power on self test)</li>
<li>ACPI (advanced config and power interfaces) - builds tables of devices with info</li>
<li>initializes hardware - no IRQ or I/O port conflicts. Tabluates PCI (Peripheral Component interconnect) devices</li>
<li>Looks for something to boot</li>
<li>Devices
<ul>
<li>Have an I/O port that the CPU can do IO to via port addresses</li>
<li>When the device is ready to be talked to, it raises an interrupt and the linux kernel starts the driver</li>
<li>ISA days
<ul>
<li>part of the trick was picking the devices so that they didn&rsquo;t conflict with the interrupts</li>
<li>PCI helps with this by automating it so that they don&rsquo;t conflict with each other</li>
</ul>
</li>
<li>You can choose what to do boot from now, and what order</li>
</ul>
</li>
<li>BIOS looks for the boot sector
<ul>
<li>copy the first sector into RAM (512 bytes per sector), starting at 0x000 7c00</li>
<li>then jumps to that address</li>
</ul>
</li>
</ul>
<h4 id="loaders-lilo-and-grub">Loaders LILO and GRUB</h4>
<ul>
<li>First sector of a disk is the Master Boot Record (MBR)</li>
<li>Containers a partition table and a program</li>
<li>Within Linux, this is a boot loader. earlier linuxes had a bootloader (512 bytes)</li>
<li>LILO (linux loader) and GRUB (Grand Unified Bootloader)</li>
<li>GRUB is much more general purpose, has it&rsquo;s own shell and can read file systems</li>
<li>You can&rsquo;t fit everything into 512 byte boot sector, so multistage</li>
<li>First part is 0x0000 7c00, then it jumps to 0x0009 6a00, which then sets up the Real Mode stack</li>
<li>Second part into 0x0009 6c00, which reads the OS list and lets the user choose the OS to boot</li>
<li>If it&rsquo;s linux, it displays loading, then loads the 512 bytes at the kernel 0x0009 0000, which then loads <code>setup()</code> to 0x0009 0200, and then jumps to run <code>setup()</code></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Real and Protected Modes</p>
<ul>
<li>Addressing modes in 80x86.</li>
<li>Real mode: segement + offset, the segement address is shifted left by four bits (10 bits)</li>
<li>Protected mode: uses page tables
<ul>
<li>Now has a User/Supervisor flag</li>
<li>When set to 0, page can only be accessed in kernel mode</li>
<li>CPL (current privilage level) is 2 bits for the cs register</li>
<li>CPL = 3 for User mode, CPL = 0 for Kernel mode (there&rsquo;s 4 rings in intel, but we only use two)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="setup">Setup</h4>
<ul>
<li>For ACPI systems, build a physical memory layout table in RAM</li>
<li>Sets up the keyboard and video card</li>
<li>Initializes the disk controllers</li>
<li>If EDD (enhanced disk drive) services, uses the BIOS to build a table of hard disks in RAM</li>
<li>Sets up the interrupt descriptor table (IDT)
<ul>
<li>Different devices can raise interrupts and you want something to happen</li>
<li>A table is a set of addresses that points to code that is run when an interrupt is run</li>
</ul>
</li>
<li>Resets the FPU</li>
<li>Switches the CPU to protected mode</li>
<li>Jumps to startup_32() (or startup_64 now)
<ul>
<li>Initalizes segmentation registers and a provisional stack</li>
<li>Zeros out the kernel&rsquo;s uninitialized data</li>
</ul>
</li>
<li>Runs <code>decompress_kernel()</code>
<ul>
<li>Kernel is decompressed and loaded into memory, and then jumps to 0x1000 0000</li>
</ul>
</li>
<li>second <code>startup_32()</code>
<ul>
<li>intializes segementation registers and a provisional stack</li>
<li>intializes kernel page tables</li>
<li>stores Page Global Dir address in <code>cr3</code> register and starts paging, setting the bit PG in the <code>cr0</code> register</li>
<li>sets up the Kernel Mode stack for process 0
<ul>
<li>what if there&rsquo;s no task waiting for the kernel to schedule? the kernel schedules PID 0, which halts the CPU</li>
<li>every millisecond, an interrupt happens, which then rechecks the run queues</li>
</ul>
</li>
</ul>
</li>
<li>Nulls all the interrupt handlers</li>
<li>Copies paramenters from the BIOS into the boot command into the first page frame (in RAM)</li>
<li>Identifies the processor model</li>
<li>Initializes the interrupt descriptor table to null handlers</li>
<li>Jumps to <code>start_kernel()</code></li>
</ul>
<h4 id="kernel-startup">Kernel Startup</h4>
<ul>
<li>Nulls all the interrupt handlers</li>
<li>Calls <code>sched_init()</code> to initialize the schedulers</li>
<li>Initializes memory allocation</li>
<li>Sets up interrupt handlers with <code>trap_init()</code> and <code>IRQ_init()</code></li>
<li>System date and time are set with <code>time_init</code></li>
<li>CPU clock speed determined by <code>calibrate_delay</code></li>
<li>Then we run <code>kernel_thread()</code></li>
<li>Finally we are at <code>/sbin/init</code>!</li>
</ul>
<h4 id="init-and-run-levels">Init and Run Levels</h4>
<ul>
<li>Users run levels (0-6 typically)</li>
<li>Distinguises between single user mode, GUI&rsquo;s, etc</li>
<li>Default values
<ul>
<li>0 - halt</li>
<li>1 - single user mode
<ul>
<li>Booting into root halfway</li>
</ul>
</li>
<li>6 - reboot</li>
<li>S is used when entering runlevle 1</li>
<li>Change with <code>telinit(8)</code>
<ul>
<li>Unix applications know what name they&rsquo;re called by, so egrep -&gt; grep -E</li>
</ul>
</li>
</ul>
</li>
<li>You can specify the run level at the command line (GRUB or LILO)</li>
<li>File names
<ul>
<li>In the unix world, <code>.tab</code> is usually table, and <code>rc</code> is &ldquo;run command&rdquo;</li>
<li><code>/etc/init.d/rc</code></li>
</ul>
</li>
<li><code>inittab</code> entries are what starts</li>
</ul>
<h4 id="rc-scripts">RC Scripts</h4>
<ul>
<li>Run command</li>
<li>Takes a run level as an arg</li>
<li>Then looks for a directory in <code>/etc/rc/\/.d</code></li>
<li>Runs each scripts with an action arg</li>
<li>Run level 0, 6 action is stop</li>
<li>Others are start</li>
<li>To run a startup script, find the right run level, and look at the different scripts, and then set it there</li>
<li>But these are init rc and <strong>not</strong> systemd</li>
<li>Stopping processes - just run <code>pkill</code></li>
<li><code>init</code> came out of SystemV, which was the original version
<ul>
<li>originally commercialized by AT&amp;T</li>
<li>Berkley did it with a different startup script <code>rc.boot</code>, <code>rc</code>, <code>rc.local</code></li>
</ul>
</li>
<li><code>upstart</code> in ubuntu</li>
</ul>
<h3 id="block-devices-and-filesystems">Block Devices and Filesystems</h3>
<h4 id="devices">Devices</h4>
<ul>
<li>Devices are special file</li>
<li><code>/dev</code> is devices</li>
<li>When we need to do IO on a device, just go out and access it!</li>
<li>Block special files and character special files
<ul>
<li><code>ls -l</code> -&gt; <code>c</code> for character file, <code>b</code> for block file</li>
<li>major and minor numbers, represents type of the device, and reprsents the instance
<ul>
<li>4k major numbers, 2^20 minor numbers</li>
</ul>
</li>
<li><code>mknod</code> is used to make a device special file</li>
<li>Nothing special about these files! You can make them anywhere</li>
<li><code>udev</code> is a program that sits there and creates files in the <code>/dev</code> directory
<ul>
<li>devices can register themselves or get a number assigned to them</li>
</ul>
</li>
<li>much effort has gone into making devices work together</li>
<li>traditional device operations
<ul>
<li><code>open()</code></li>
<li><code>close()</code></li>
<li><code>read()</code></li>
<li><code>write()</code></li>
<li><code>seek()</code></li>
<li><code>ioctl</code>
<ul>
<li>lets you do particular things to particular device</li>
<li>usually takes some integers (like everything in unix world)</li>
</ul>
</li>
</ul>
</li>
<li>block devices
<ul>
<li>tend to do I/O in terms of blocks</li>
<li>like disk drives</li>
<li>usually more random access</li>
<li>disks for example</li>
</ul>
</li>
<li>character devices
<ul>
<li>operate in bytes</li>
<li>usually more seequential</li>
<li>mouse/audio card/printer/tape/terminal for example</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="block-i-o">Block I/O</h4>
<ul>
<li>How does block IO work?</li>
<li>We want to write some bytes a disk, eventually we must turn this into a block</li>
<li>Top level: Virtual file system
<ul>
<li>Came along SystemV (release 4)</li>
<li>Pre VFS, you had to mount a read/write for every single file system type</li>
<li>VFS unifed all of this, generic read/write/open/close</li>
<li>Cool thing that VFS brought: /proc file system! /cgroup file system! We can have file systems that don&rsquo;t even represent a storage device</li>
</ul>
</li>
<li>Page cache
<ul>
<li>There used to a buffer cache for blocks</li>
<li>and page caches for pages</li>
<li>now we only have one page cache</li>
<li>when you make a write call to the disk, the kernel is actually taking the data to write it at a later time</li>
<li>rapid return of writes is a performance gain but a reliability loss</li>
<li>if you&rsquo;ve written a lot of data, you might need to get it again! hence why it&rsquo;s held in the page cache
<ul>
<li>how pages stay around? We also page cache our writes</li>
<li><strong>NOT</strong> the pages that represent the memory map</li>
<li>two different areas of memory</li>
<li>page cache for regular files, page cache for block IO</li>
<li>swapped data go into page cache, even special files</li>
<li>shared memory trick? Memory map fake files in the page cache, and forks can read it back out</li>
</ul>
</li>
<li>Each page is owned by an inode
<ul>
<li>also has an offset for that file</li>
</ul>
</li>
<li>We want to periodically scan the page cache for dirty pages and flush to disk
<ul>
<li><code>bdflush</code> in the past</li>
</ul>
</li>
<li>We also want to track how long pages have been dirty and flush before too long in the cache
<ul>
<li><code>kupdate</code> in the past</li>
</ul>
</li>
<li>Now kernel runs varying number of <code>pdflush</code> threads</li>
</ul>
</li>
<li>Mapping layer
<ul>
<li>Most of the action</li>
<li>FS takes the pointer to the data, allocates appropriate pages, and then turns it into blocks to be written</li>
<li>FS knows how to talk SCSI or SATA or <a href="/posts/hard_drives/#nvme">NVMe</a></li>
<li>A disk is represented as a sequential list of blocks, which then we map over</li>
<li>We also have a &ldquo;segement&rdquo;, we should try to find the blocks that are together, which can be sent together</li>
<li>Pages are 4kb, sectors are 512 B, blocks can range between these two sizes (although pages are huge now)</li>
<li>once blocks are known, send the request to the generic block layer via <code>submit_bh()</code> and <code>ll_rw_block()</code> for multiple blocks</li>
<li>arguments are direction (r/w) and buffer heads</li>
</ul>
</li>
<li>Generic block layer
<ul>
<li>Gets sent data from the mapping layer</li>
</ul>
</li>
</ul>
<p>procs &mdash;&mdash;&mdash;&ndash;memory&mdash;&mdash;&mdash;- &mdash;swap&ndash; &mdash;&ndash;io&mdash;- -system&ndash; &mdash;&mdash;cpu&mdash;&ndash;
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
0  0      0 65022788 1420664 60968808    0    0     0     9    0    0  3  0 97  0  0</p>
<ul>
<li>Generic block layer combines contingous blocks into segments called a <code>bio</code> (block IO unit)</li>
<li>calls <code>generic_make_request()</code> (<code>send_bio_noacct</code> now maybe?)</li>
<li>Then it sends it to the device driver using the <code>strategy()</code> routine</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li><a href="/posts/file_systems/">file systems</a>
<ul>
<li>Stores data on disk</li>
<li>Data and metadata</li>
<li>Metadata is permissions, ownership, timestamp, size</li>
<li>Efficient data access is important</li>
<li>Usually metadata access is the most important</li>
<li>Metadata is cached on the system</li>
<li>Journaling helps (logging)
<ul>
<li>Like the traditional DB two-phase commit</li>
<li>First write log, then append to last</li>
<li>Then you update the actual disk with the log</li>
</ul>
</li>
<li>If a disk is an inconsistent state, run <code>fsck</code> -&gt; but this is SLOW</li>
<li>Most journaling filesystems use it only for metadata, but some use it for all. This is usually configurable like <code>ext2</code> and <code>ext3</code>
<ul>
<li>Ext3 without journalism is just ex2</li>
<li>You can put journals on a separate disk (since journal IO isn&rsquo;t competing with disk as much)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="files">Files</h4>
<ul>
<li><a href="/posts/inodes/">inodes</a>
<ul>
<li>Every file system has an inode (contains all the information returned by <code>ls -l</code>)</li>
<li>device</li>
<li>mode</li>
<li>links</li>
<li>uid and gid</li>
<li>size in bytes</li>
<li>size in blocks
<ul>
<li>Block addresses are stored too, 12 direct blocks, one indirect block address, one double-indrect block address, and one triple-indirect block address</li>
<li>15 total slots</li>
<li>the reason there&rsquo;s indirect is because the first 12k is stored in the file
<ul>
<li>MB files therefore have to use extra blocks</li>
<li>next address points to a block, that is filled with addresses</li>
<li>second indirect block points to a block that is filled with addresses that go to a different block!</li>
<li>third, so on</li>
<li>direct: 12kb</li>
<li>indirect: 256 blocks = 256kb</li>
<li>double: 256^2 = 64MB</li>
<li>triple: 256^3 = 16 TB</li>
<li>this goes back at least to version 7</li>
</ul>
</li>
</ul>
</li>
<li>atime, mtime, ctime
<ul>
<li>atime -&gt; access time, last time file was <code>open()</code></li>
<li>mtime -&gt; last time file was modified</li>
<li>ctime -&gt; last time inode was changed (ctime is NOT creation time, most unix systems don&rsquo;t track creation time)</li>
</ul>
</li>
<li>Multiple directions that point to the same inode is a <code>hard link</code></li>
<li>One inode per file</li>
</ul>
</li>
<li>Unix timestamps
<ul>
<li>Since Jan 1st 1970 in UTC</li>
<li>32 bits</li>
<li>Jan 18th, 2038</li>
</ul>
</li>
<li>Sparse files
<ul>
<li>What if you write some bytes into the beginning, but then jump wayyy down and write later, where there&rsquo;s no data in between.</li>
<li>Logically, the bytes in between are filled with zeros</li>
<li>Don&rsquo;t allocate for stuff in between</li>
<li>If you copy a sparse file, dumb copies will take a bad copy!</li>
</ul>
</li>
<li>Superblock
<ul>
<li>Information about the filesystem</li>
<li>Much of what is in the df command</li>
</ul>
</li>
</ul>
<h3 id="networking-configuring-and-building-a-kernel">Networking, Configuring &amp; Building a Kernel</h3>
<ul>
<li>OSI model -&gt; physical, data link, network, transport, session, presentation, application - <a href="/posts/20200415154022-networks/">networks</a></li>
<li>What a socket?
<ul>
<li>IP address and port on each end, which uniquely identifies a connection</li>
</ul>
</li>
<li>Network layer implements IP to retransmit packets, but this is machine to machine
<ul>
<li>Intermediate devices bridge this gap (usually a router)</li>
</ul>
</li>
<li>Ethernet/data link layer is what&rsquo;s next, also packet switched with ethernet address 00:11:22:33:44:55 (mac address), NIC to NIC</li>
<li>Networking - physical layer, signal level
<ul>
<li>CSMA/CD (carrier sense multiple access with collision detect)
<ul>
<li>old: 4 way stop sign, everyone tries to transmit and hope that there&rsquo;s nothing there</li>
<li>old: token rings, everyone gets a turn like a traffic light</li>
</ul>
</li>
<li>carrier modulates an IO signal</li>
<li>twisted pair cables</li>
<li>a network device is a special animal</li>
<li>not a character or a block device</li>
<li>no major/minor numbers</li>
<li>hardware interface initiates IO</li>
<li>not in <code>/dev</code></li>
<li>when a device driver gets registered, it adds the device to the internal list</li>
<li>interface is also different!
<ul>
<li><code>open</code></li>
<li><code>stop</code></li>
<li><code>hard_start_xmit()</code> - start transmit packets</li>
<li><code>rebuild_header</code> - using ARP (address resolution protocol)</li>
<li><code>tx_timeout</code></li>
<li><code>net_device_status</code> - when <code>netstat</code> gets called</li>
<li><code>set_config</code></li>
</ul>
</li>
<li>also <code>ioctl</code>
<ul>
<li>SIOCSIFADDR</li>
<li>SIOCSIFFLAGS</li>
<li>&ldquo;socket IO control set InterFace Flags&rdquo;</li>
</ul>
</li>
</ul>
</li>
<li>Packet transmission
<ul>
<li>Data is placed on a socket buffer</li>
<li>call <code>hard_start_xmit</code></li>
<li>OS checks to make sure you&rsquo;re doing less than the Maximum Transmission Unit (MTU)</li>
<li>Places in transmission queue</li>
<li>Driver processes queue and sends to hardware</li>
</ul>
</li>
<li>Packet Reception
<ul>
<li>Two ways
<ul>
<li>Interrupt driven (most drivers use this one)</li>
<li>polled</li>
</ul>
</li>
<li>Recieves incoming data, places it in socket buffer</li>
<li>If IO rate is too high, use polling</li>
</ul>
</li>
<li>Address Resolution Protocol
<ul>
<li>Associates IP with a MAC address</li>
<li>Broadcasts an ARP request on the network: &ldquo;who has 10.1.2.3&rdquo;?</li>
<li>Saves entries into the ARP cache</li>
<li>Manipulate with <code>arp</code></li>
</ul>
</li>
<li>Configure Interface
<ul>
<li>always boils down to <code>ifconfig(8)</code></li>
</ul>
</li>
<li>Linux Packet Filter
<ul>
<li>
<p>Basically the &ldquo;firewall&rdquo;, now managed by <code>iptables</code> or <code>ufw</code></p>
<ul>
<li><code>ipchains</code> and <code>ipfwadm</code></li>
</ul>
</li>
<li>
<p>Sets a list of rules, accept a match and execute an action</p>
<figure><img src="/ox-hugo/2024-02-21_17-34-47_screenshot.png"/>
        </figure>

</li>
<li>
<p>Three basic chains: input, forward, and output</p>
<ul>
<li>Each packet only follows one chain!</li>
<li>there&rsquo;s a default rule for every chain</li>
</ul>
</li>
<li>
<p>Connection tracking?</p>
<ul>
<li><code>ip_conntrack.o</code> module</li>
</ul>
</li>
<li>
<p>List all the rules with <code>iptables -L -v</code></p>
</li>
</ul>
</li>
<li>Router table
<ul>
<li>Kernel has a routing function?</li>
<li>Usually one of the multiple interfaces, so router table</li>
<li>Order matters, and search until we match a pattern</li>
<li><code>netstat -nr</code> also shows you the router table (-n for hosts as IPs instead of having it do DNS)</li>
<li><code>route</code> command for checking the router table</li>
</ul>
</li>
<li>Kernel Build
<ul>
<li>go to kernel.org</li>
<li>need <code>bunzip2</code> to decompress</li>
<li>can build as anyone, only need root to instal</li>
<li>why?
<ul>
<li>add a new feature/driver, or your driver was left out</li>
<li>or to leave out specific drivers</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="crashes">Crashes</h2>
<ul>
<li>Breakpad and Crashpad from google allow for dump tracing
<ul>
<li><a href="https://chromium.googlesource.com/breakpad/breakpad/">https://chromium.googlesource.com/breakpad/breakpad/</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/win32/debug/minidump-files">https://docs.microsoft.com/en-us/windows/win32/debug/minidump-files</a></li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1588530">https://bugzilla.mozilla.org/show_bug.cgi?id=1588530</a></li>
</ul>
</li>
<li><a href="https://www.instapaper.com/read/1524786035">https://www.instapaper.com/read/1524786035</a></li>
<li>Linux uses signals to register SIGABRT/BUS/etc</li>
<li>By default, signal handlers are called on the same stack where the crash occured, which is fine for most cases except a stack overflow</li>
<li>Apple computers use Mach exceptions: <a href="https://flylib.com/books/en/3.126.1.109/1/">https://flylib.com/books/en/3.126.1.109/1/</a></li>
<li><a href="https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/KernelProgramming/Mach/Mach.html">https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/KernelProgramming/Mach/Mach.html</a></li>
<li><a href="https://docs.darlinghq.org/internals/macos-specifics/mach-ports.html">https://docs.darlinghq.org/internals/macos-specifics/mach-ports.html</a></li>
<li>Core dumps can be enavbled with <code>ulimit -c unlimited</code> on a temp basis. Otherwise configure <code>/etc/security/limits.conf</code></li>
<li><code>gcore -o filename PID</code> can also be used to generate a core dump</li>
</ul>
<h2 id="exceptions">Exceptions</h2>
<ul>
<li>Exceptions can happen because of invalid access or when a runtime check fails. This throws a <code>SIGABRT</code></li>
</ul>
<h2 id="tracing">Tracing</h2>
<ul>
<li><a href="https://jvns.ca/blog/2017/07/05/linux-tracing-systems/">https://jvns.ca/blog/2017/07/05/linux-tracing-systems/</a></li>
<li><a href="/posts/ebpf/">ebpf</a></li>
</ul>
<h2 id="debian">Debian</h2>
<h3 id="perf-performance-issues"><code>perf</code> performance issues</h3>
<ul>
<li><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911815">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=911815</a>
<ul>
<li>when not linked against libbfd, <code>perf</code> calls out to <code>addr2line</code> for every address lookup, which is infeasible</li>
<li>possible solution: <a href="https://michcioperz.com/post/slow-perf-script/">https://michcioperz.com/post/slow-perf-script/</a></li>
<li>patches: <a href="https://lore.kernel.org/linux-perf-users/20210909112202.1947499-1-tonyg@leastfixedpoint.com/">https://lore.kernel.org/linux-perf-users/20210909112202.1947499-1-tonyg@leastfixedpoint.com/</a></li>
</ul>
</li>
</ul>
<h2 id="linux-audio">Linux Audio</h2>
<ul>
<li>Pipewire: <a href="http://pipewire.org">http://pipewire.org</a>
<ul>
<li>provides low latency, graph based processing for audio</li>
</ul>
</li>
</ul>
<h2 id="ld-preload-and-ld-library-path">LD_PRELOAD and LD_LIBRARY_PATH</h2>
<ul>
<li>Different usages on <a href="/posts/os_x/">os x</a>, uses <code>DYLD_LIBRARY_PATH</code> and <code>DYLD_FALLBACK_LIBRARY_PATH</code>
<ul>
<li>See <a href="https://stackoverflow.com/questions/3146274/is-it-ok-to-use-dyld-library-path-on-mac-os-x-and-whats-the-dynamic-library-s">https://stackoverflow.com/questions/3146274/is-it-ok-to-use-dyld-library-path-on-mac-os-x-and-whats-the-dynamic-library-s</a></li>
<li><a href="https://github.com/Jackett/Jackett/issues/5589">https://github.com/Jackett/Jackett/issues/5589</a></li>
</ul>
</li>
</ul>
<h2 id="linux-kernel-headers">Linux Kernel Headers</h2>
<ul>
<li><a href="https://lwn.net/ml/linux-kernel/YdIfz+LMewetSaEB@gmail.com/">https://lwn.net/ml/linux-kernel/YdIfz+LMewetSaEB@gmail.com/</a></li>
</ul>
<h2 id="cellular-modems">Cellular Modems</h2>
<ul>
<li><a href="https://forums.lenovo.com/t5/Ubuntu/P14s-Gen-3-Ubuntu-22-Fibocom-L860-GL-not-working/m-p/5177047?page=4#5967453">https://forums.lenovo.com/t5/Ubuntu/P14s-Gen-3-Ubuntu-22-Fibocom-L860-GL-not-working/m-p/5177047?page=4#5967453</a></li>
<li><a href="https://forums.lenovo.com/t5/Fedora/Fedora-on-X1-Extreme-Gen-3-WWAN-Fibocom-L860-GL-4G-LTE-Advanced-Cat-16-not-working/m-p/5044699?page=7">https://forums.lenovo.com/t5/Fedora/Fedora-on-X1-Extreme-Gen-3-WWAN-Fibocom-L860-GL-4G-LTE-Advanced-Cat-16-not-working/m-p/5044699?page=7</a></li>
<li><a href="https://support.lenovo.com/us/en/solutions/pd031426">https://support.lenovo.com/us/en/solutions/pd031426</a></li>
</ul>
<h2 id="io-uring">io_uring</h2>
<ul>
<li><a href="https://news.ycombinator.com/item?id=36353845">https://news.ycombinator.com/item?id=36353845</a></li>
</ul>
<h2 id="huge-pages">Huge Pages</h2>
<p>-<a href="https://www.evanjones.ca/hugepages-are-a-good-idea.html">https://www.evanjones.ca/hugepages-are-a-good-idea.html</a></p>
<h2 id="monitoring-tools">Monitoring Tools</h2>
<p>Guide: <a href="https://www.brendangregg.com/blog/2015-07-08/choosing-a-linux-tracer.html">https://www.brendangregg.com/blog/2015-07-08/choosing-a-linux-tracer.html</a></p>
<ul>
<li><a href="https://lttng.org/features/#insight">https://lttng.org/features/#insight</a></li>
<li><a href="https://www.kernel.org/doc/Documentation/trace/ftrace.txt">https://www.kernel.org/doc/Documentation/trace/ftrace.txt</a></li>
<li><a href="https://sourceware.org/git/?p=systemtap.git;a=blob_plain;f=README;hb=HEAD">https://sourceware.org/git/?p=systemtap.git;a=blob_plain;f=README;hb=HEAD</a></li>
<li><a href="https://netflixtechblog.com/introducing-vector-netflixs-on-host-performance-monitoring-tool-c0d3058c3f6f?gi=f30f393b4982">https://netflixtechblog.com/introducing-vector-netflixs-on-host-performance-monitoring-tool-c0d3058c3f6f?gi=f30f393b4982</a></li>
<li><a href="https://www.brendangregg.com/perf.html">https://www.brendangregg.com/perf.html</a></li>
<li><a href="https://lwn.net/Articles/608497/">https://lwn.net/Articles/608497/</a></li>
<li><a href="https://github.com/opendtrace/documentation">https://github.com/opendtrace/documentation</a>
<ul>
<li><a href="https://github.com/tpn/pdfs/blob/master/DTrace%20Dynamic%20Tracing%20In%20Oracle%20Solaris%2C%20Mac%20OS%20X%20%26%20FreeBSD.pdf">https://github.com/tpn/pdfs/blob/master/DTrace%20Dynamic%20Tracing%20In%20Oracle%20Solaris%2C%20Mac%20OS%20X%20%26%20FreeBSD.pdf</a></li>
</ul>
</li>
</ul>
<h2 id="perf">Perf</h2>
<ul>
<li><a href="https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top">https://perf.wiki.kernel.org/index.php/Tutorial#Live_analysis_with_perf_top</a></li>
</ul>
<h2 id="netlink">Netlink</h2>
<ul>
<li><a href="https://docs.kernel.org/userspace-api/netlink/intro.html">https://docs.kernel.org/userspace-api/netlink/intro.html</a></li>
<li>Evolved procotol that talks over sockets instead of fixed format C structures</li>
</ul>
<h2 id="mounting">Mounting</h2>
<ul>
<li><a href="https://dbohdan.com/clean-mount-lists">https://dbohdan.com/clean-mount-lists</a></li>
</ul>
<h2 id="cgroups-and-names">cgroups and names</h2>
<ul>
<li>Foundations of containers for <a href="/posts/kubernentes/">kubernetes (k8s)</a></li>
</ul>
<h2 id="objects">Objects</h2>
<ul>
<li><code>objdump</code> to look at elf files</li>
</ul>

          




   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   



  <div class="bl-section">
    <h4>Links to this note</h4>
    <div class="backlinks">
        <ul>
       
          <li><a href="/posts/allocators/">allocators</a></li>
       
          <li><a href="/posts/bpf/">bpf</a></li>
       
          <li><a href="/posts/centos/">CentOS</a></li>
       
          <li><a href="/posts/criu_kernal_checkpointing/">criu/kernel checkpointing</a></li>
       
          <li><a href="/posts/docker/">docker/containers</a></li>
       
          <li><a href="/posts/ebpf/">ebpf</a></li>
       
          <li><a href="/posts/erlang/">erlang</a></li>
       
          <li><a href="/posts/fedora_silverblue/">fedora silverblue</a></li>
       
          <li><a href="/posts/bfp/">Gregg - BFP Performance Tools</a></li>
       
          <li><a href="/posts/hard_drives/">hard drives</a></li>
       
          <li><a href="/posts/inodes/">inodes</a></li>
       
          <li><a href="/posts/kernel_bypass/">kernel bypass</a></li>
       
          <li><a href="/posts/libuv/">libuv</a></li>
       
          <li><a href="/posts/20200415154022-networks/">networks</a></li>
       
          <li><a href="/posts/operating_systems/">operating systems</a></li>
       
          <li><a href="/posts/relocation_read_only_relro/">relocation read only (relro)</a></li>
       
          <li><a href="/posts/storage/">storage</a></li>
       
          <li><a href="/posts/toolbox/">toolbox</a></li>
       
          <li><a href="/posts/virtualization/">virtualization (VMs)</a></li>
       
     </ul>
    </div>
  </div>


      </div>
    </div>
  </div>
</div>

<script src="/js/URI.js" type="text/javascript"></script>

<script src="/js/page.js" type="text/javascript"></script>
</body>
</html>
