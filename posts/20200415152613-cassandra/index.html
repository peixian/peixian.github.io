<!DOCTYPE html>
<html><title>Cassandra</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />


<link rel="stylesheet" href="/css/main.min.532078bb650bec3433e8e9db19e0453faa66c9cc0ce761054558a91d87039e9d.css"/>
<script defer src="/en.search.min.584cf1de9ca352d9ef3b096ac8cc7c5b58bb88bd14b862f442e9ce713b292ee8.js" integrity="sha256-WEzx3pyjUtnvOwlqyMx8W1i7iL0UuGL0QunOcTspLug="></script>

<link rel="stylesheet" href="/katex/katex.min.css" />
<script defer src="/katex/katex.min.js"></script>
<script defer src="/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<body><header>
    <a href="/" id="logo">
        <img src="/svg/icon.svg" alt="icon" id="raccoon" />

    </a>
    <h3 class="site-title">عجفت الغور</h3>
    <div id="search">
        
<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>

    </div>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
          <h1>Cassandra</h1>

          <p>Tags: <a href="/posts/databases/">Databases</a>, <a href="/posts/distributed_systems/">distributed systems</a></p>
<h2 id="internals">Internals</h2>
<ul>
<li>Seed nodes:
<ul>
<li>No purpose other than bootstrapping the gossip process</li>
<li>DO NOT MAKE ALL NODES SEED NODES</li>
</ul>
</li>
</ul>
<h2 id="concurrent-compactors"><code>concurrent_compactors</code></h2>
<ul>
<li>Sets the number of IO threads dedicated to compaction</li>
<li>If too high, can cause IO starvation and not servicing requests
<ul>
<li>Depends on NVME drives</li>
</ul>
</li>
<li>set by the <code>concurrenct_compactors</code> string in yaml
<ul>
<li>can also use <code>nodetool setconcurrent_compactors</code> in C* &gt; 3</li>
</ul>
</li>
</ul>
<h2 id="counter-table-ttl-s">Counter Table TTL&rsquo;s</h2>
<ul>
<li><a href="https://issues.apache.org/jira/browse/CASSANDRA-2103">https://issues.apache.org/jira/browse/CASSANDRA-2103</a></li>
<li><a href="https://blog.knoldus.com/cassandra-counter-column-and-table/">https://blog.knoldus.com/cassandra-counter-column-and-table/</a></li>
<li><a href="https://docs.scylladb.com/using-scylla/counters/">https://docs.scylladb.com/using-scylla/counters/</a></li>
<li><a href="https://docs.scylladb.com/getting-started/time_to_live/">https://docs.scylladb.com/getting-started/time_to_live/</a></li>
<li><a href="https://stackoverflow.com/questions/29564744/data-modeling-with-counters-in-cassandra-expiring-columns">https://stackoverflow.com/questions/29564744/data-modeling-with-counters-in-cassandra-expiring-columns</a></li>
<li><a href="https://github.com/Netflix/astyanax/wiki/Working-with-counter-columns">https://github.com/Netflix/astyanax/wiki/Working-with-counter-columns</a></li>
<li><a href="https://dzone.com/articles/cassandra-counter-columns-and-tables">https://dzone.com/articles/cassandra-counter-columns-and-tables</a></li>
<li><a href="https://stackoverflow.com/questions/24881957/what-is-the-way-for-counting-number-of-columns-in-row-in-cassandra">https://stackoverflow.com/questions/24881957/what-is-the-way-for-counting-number-of-columns-in-row-in-cassandra</a></li>
<li><a href="https://www.ably.io/blog/cassandra-counter-columns-nice-in-theory-hazardous-in-practice">https://www.ably.io/blog/cassandra-counter-columns-nice-in-theory-hazardous-in-practice</a></li>
</ul>
<h2 id="jolokia-agent">Jolokia Agent</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/35318593/jolokia-agent-for-cassandra">https://stackoverflow.com/questions/35318593/jolokia-agent-for-cassandra</a></li>
<li><a href="https://stackoverflow.com/questions/35318593/jolokia-agent-for-cassandra">https://stackoverflow.com/questions/35318593/jolokia-agent-for-cassandra</a></li>
</ul>
<h2 id="cqlsh">CQLSH</h2>
<ul>
<li>cqlsh specifically checks for <code>python2.7</code>, which may need to be aliased somewhere</li>
</ul>
<h2 id="scylla">Scylla</h2>
<ul>
<li>Xandra driver uses <a href="https://queue.acm.org/appendices/codel.html">https://queue.acm.org/appendices/codel.html</a></li>
<li>Whether tweaking <code>tombstone_compaction_interval</code> affects things: <a href="https://github.com/PaytmLabs/cassandra/blob/master/src/java/org/apache/cassandra/db/compaction/AbstractCompactionStrategy.java#L360">https://github.com/PaytmLabs/cassandra/blob/master/src/java/org/apache/cassandra/db/compaction/AbstractCompactionStrategy.java#L360</a></li>
</ul>
<h3 id="tracing">Tracing</h3>
<ul>
<li>
<p><a href="https://opensource.docs.scylladb.com/stable/using-scylla/tracing.html#probabilistic-tracing">https://opensource.docs.scylladb.com/stable/using-scylla/tracing.html#probabilistic-tracing</a></p>
</li>
<li>
<p>normally you can turn on CQL tracing with</p>
<blockquote>
<p>cqlsh&gt; TRACING ON</p>
</blockquote>
</li>
<li>
<p>also can set <code>nodetool settraceprobability 0.0001</code></p>
</li>
</ul>
<h2 id="cassandra-gossiper-protocol">Cassandra Gossiper Protocol</h2>
<ul>
<li>Gossiper chooses a random node in the cluster and initializes a session with it
<ul>
<li>each gossip require 3 messages</li>
</ul>
</li>
<li>Sends its friend a Gossip Disget Syn Message</li>
<li>Followed by a GossipDigestAck message</li>
<li>Th eoriginal ack is returned with a gossip digestack2 message</li>
</ul>
<h2 id="talks">Talks</h2>
<ul>
<li><a href="https://github.com/ngcc/ngcc2019/tree/master">https://github.com/ngcc/ngcc2019/tree/master</a></li>
</ul>

          




   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   
      
   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   



  <div class="bl-section">
    <h4>Links to this note</h4>
    <div class="backlinks">
        <ul>
       
          <li><a href="/posts/databases/">Databases</a></li>
       
          <li><a href="/posts/elixir_driver_for_cassandra_scylla/">elixir driver for cassandra/scylla</a></li>
       
          <li><a href="/posts/homogenous_time_blog_post/">Homogenous Time: Ibn Khaldun and Transaction Logs</a></li>
       
          <li><a href="/posts/k_v_stores/">k/v stores</a></li>
       
          <li><a href="/posts/programming_kubernetes_chapter_1/">programming kubernetes chapter 1 - intro</a></li>
       
     </ul>
    </div>
  </div>


      </div>
    </div>
  </div>
</div>

<script src="/js/URI.js" type="text/javascript"></script>

<script src="/js/page.js" type="text/javascript"></script>
</body>
</html>
